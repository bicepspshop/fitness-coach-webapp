<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Фитнес-помощник для тренеров</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    
    <!-- Стили -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    
    <!-- Meta теги для PWA -->
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Фитнес-помощник">
    
    <!-- Favicon -->
    <link rel="icon" href="assets/avatar-placeholder.svg" type="image/svg+xml">
</head>
<body>
    <!-- Загрузчик -->
    <div id="loader" class="loader">
        <div class="loader-spinner">
            <i class="fas fa-dumbbell"></i>
        </div>
        <p>Загрузка приложения...</p>
    </div>

    <!-- Основное приложение -->
    <div id="app" class="app" style="display: none;">
        
        <!-- Заголовок (скрыт в Telegram) -->
        <header class="header">
            <div class="header-content">
                <button id="menu-toggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="header-title">
                    <i class="fas fa-dumbbell"></i>
                    Фитнес-помощник
                </div>
                
                <div class="header-actions">
                    <button id="notifications-btn" class="btn-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button id="settings-btn" class="btn-icon" onclick="app.navigateTo('settings')">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Боковая панель -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <img src="assets/avatar-placeholder.jpg" alt="Тренер" class="trainer-avatar">
                <div class="trainer-info">
                    <h3 id="trainer-name">Фитнес Тренер</h3>
                    <p>Персональный тренер</p>
                </div>
            </div>
            
            <nav>
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link active" data-page="dashboard">
                        <i class="fas fa-home"></i> Главная
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="clients">
                        <i class="fas fa-users"></i> Клиенты
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="workouts">
                        <i class="fas fa-dumbbell"></i> Тренировки
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="analytics">
                        <i class="fas fa-chart-line"></i> Аналитика
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="nutrition">
                        <i class="fas fa-apple-alt"></i> Питание
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="payments">
                        <i class="fas fa-credit-card"></i> Платежи
                    </a></li>
                    <li><a href="#" class="nav-link" data-page="settings">
                        <i class="fas fa-cog"></i> Настройки
                    </a></li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <button class="btn btn-outline w-full" onclick="app.showHelp()">
                    <i class="fas fa-question-circle"></i> Помощь
                </button>
            </div>
        </aside>

        <!-- Основной контент -->
        <main class="main-content">
            
            <!-- Главная страница -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <div>
                        <h2>Добро пожаловать!</h2>
                        <p>Обзор вашей тренерской деятельности</p>
                    </div>
                    <button class="btn btn-primary" onclick="app.showAddClientModal()">
                        <i class="fas fa-plus"></i> Добавить клиента
                    </button>
                </div>

                <!-- Статистика -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-clients">25</h3>
                            <p>Всего клиентов</p>
                            <div class="stat-trend positive">+3 за месяц</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-workouts">156</h3>
                            <p>Тренировок проведено</p>
                            <div class="stat-trend positive">+12 за неделю</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-revenue">127,500₽</h3>
                            <p>Доход за месяц</p>
                            <div class="stat-trend positive">+15%</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="today-workouts">5</h3>
                            <p>Тренировок сегодня</p>
                            <div class="stat-trend neutral">Обычно</div>
                        </div>
                    </div>
                </div>

                <!-- Быстрые действия -->
                <div class="quick-actions">
                    <h3>Быстрые действия</h3>
                    <div class="action-buttons">
                        <div class="action-btn" onclick="app.showAddClientModal()">
                            <i class="fas fa-user-plus"></i>
                            <span>Добавить клиента</span>
                        </div>
                        <div class="action-btn" onclick="app.showAddWorkoutModal()">
                            <i class="fas fa-calendar-plus"></i>
                            <span>Запланировать тренировку</span>
                        </div>
                        <div class="action-btn" onclick="app.navigateTo('analytics')">
                            <i class="fas fa-chart-bar"></i>
                            <span>Просмотреть аналитику</span>
                        </div>
                        <div class="action-btn" onclick="app.navigateTo('payments')">
                            <i class="fas fa-credit-card"></i>
                            <span>Учет платежей</span>
                        </div>
                    </div>
                </div>

                <!-- Основной контент дашборда -->
                <div class="dashboard-grid">
                    <!-- Расписание на сегодня -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-calendar-day"></i> Расписание на сегодня</h3>
                        <div id="today-schedule" class="schedule-list">
                            <!-- Будет заполнено JS -->
                        </div>
                    </div>

                    <!-- Прогресс клиентов -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-chart-line"></i> Прогресс клиентов</h3>
                        <div style="height: 250px; position: relative;">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Страница клиентов -->
            <div id="clients-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Клиенты</h2>
                        <p>Управление базой клиентов</p>
                    </div>
                    <button class="btn btn-primary" onclick="app.showAddClientModal()">
                        <i class="fas fa-plus"></i> Добавить клиента
                    </button>
                </div>

                <!-- Поиск и фильтры -->
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="clients-search" placeholder="Поиск клиентов...">
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">Все</button>
                    <button class="filter-btn" data-filter="active">Активные</button>
                    <button class="filter-btn" data-filter="inactive">Неактивные</button>
                    <button class="filter-btn" data-filter="new">Новые</button>
                </div>

                <!-- Список клиентов -->
                <div id="clients-grid" class="clients-grid">
                    <!-- Будет заполнено JS -->
                </div>
            </div>

            <!-- Страница тренировок -->
            <div id="workouts-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Тренировки</h2>
                        <p>Планирование и управление тренировками</p>
                    </div>
                    <button class="btn btn-primary" onclick="app.showAddWorkoutModal()">
                        <i class="fas fa-plus"></i> Запланировать тренировку
                    </button>
                </div>

                <!-- Календарь тренировок -->
                <div id="workouts-calendar" class="calendar">
                    <!-- Будет заполнено JS -->
                </div>
            </div>

            <!-- Страница аналитики -->
            <div id="analytics-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Аналитика</h2>
                        <p>Статистика и отчеты</p>
                    </div>
                    <div class="date-range-picker">
                        <input type="date" id="date-from" value="2024-01-01">
                        <span>до</span>
                        <input type="date" id="date-to" value="2024-12-31">
                    </div>
                </div>

                <!-- Графики аналитики -->
                <div class="analytics-grid">
                    <div class="chart-card">
                        <h3>Новые клиенты</h3>
                        <div style="height: 300px; position: relative;">
                            <canvas id="clientsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <h3>Доходы</h3>
                        <div style="height: 300px; position: relative;">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <h3>Типы тренировок</h3>
                        <div style="height: 300px; position: relative;">
                            <canvas id="workoutTypesChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <h3>Посещаемость</h3>
                        <div style="height: 300px; position: relative;">
                            <canvas id="attendanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Страница питания -->
            <div id="nutrition-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Планы питания</h2>
                        <p>Создание и управление планами питания</p>
                    </div>
                    <button class="btn btn-primary" onclick="app.showAddNutritionModal()">
                        <i class="fas fa-plus"></i> Создать план
                    </button>
                </div>

                <div class="empty-state">
                    <i class="fas fa-apple-alt fa-3x"></i>
                    <h3>Планы питания</h3>
                    <p>Функция в разработке</p>
                </div>
            </div>

            <!-- Страница платежей -->
            <div id="payments-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Платежи</h2>
                        <p>Учет доходов и расходов</p>
                    </div>
                    <button class="btn btn-primary" onclick="app.showAddPaymentModal()">
                        <i class="fas fa-plus"></i> Добавить платеж
                    </button>
                </div>

                <div class="empty-state">
                    <i class="fas fa-credit-card fa-3x"></i>
                    <h3>Финансовый учет</h3>
                    <p>Функция в разработке</p>
                </div>
            </div>

            <!-- Страница настроек -->
            <div id="settings-page" class="page">
                <div class="page-header">
                    <div>
                        <h2>Настройки</h2>
                        <p>Конфигурация приложения</p>
                    </div>
                </div>

                <div class="settings-sections">
                    <div class="settings-section">
                        <h3><i class="fas fa-user"></i> Профиль тренера</h3>
                        
                        <div class="form-group">
                            <label>Имя</label>
                            <input type="text" value="Фитнес Тренер" placeholder="Ваше имя">
                        </div>
                        
                        <div class="form-group">
                            <label>Специализация</label>
                            <input type="text" placeholder="Например: Силовые тренировки, Кроссфит">
                        </div>
                        
                        <div class="form-group">
                            <label>О себе</label>
                            <textarea placeholder="Расскажите о своем опыте..."></textarea>
                        </div>
                        
                        <button class="btn btn-primary">Сохранить профиль</button>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-bell"></i> Уведомления</h3>
                        
                        <div class="notification-settings">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <strong>Напоминания о тренировках</strong>
                                    <p>Получать уведомления за 30 минут до тренировки</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <div class="setting-info">
                                    <strong>Новые клиенты</strong>
                                    <p>Уведомления о регистрации новых клиентов</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="setting-item">
                                <div class="setting-info">
                                    <strong>Платежи</strong>
                                    <p>Уведомления о поступлении платежей</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-palette"></i> Внешний вид</h3>
                        
                        <div class="form-group">
                            <label>Тема</label>
                            <select id="theme-selector">
                                <option value="auto">Автоматически</option>
                                <option value="light">Светлая</option>
                                <option value="dark">Темная</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Язык</label>
                            <select>
                                <option value="ru">Русский</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Модальные окна -->
    
    <!-- Модальное окно добавления клиента -->
    <div id="add-client-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Новый клиент</h3>
                <button class="modal-close" onclick="app.closeModal('add-client-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-client-form">
                    <div class="form-group">
                        <label>Имя*</label>
                        <input type="text" name="firstName" placeholder="Введите имя клиента" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Фамилия</label>
                        <input type="text" name="lastName" placeholder="Введите фамилию клиента">
                    </div>
                    
                    <div class="form-group">
                        <label>Телефон</label>
                        <input type="tel" name="phone" placeholder="+7 (999) 123-45-67">
                    </div>
                    
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" placeholder="client@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label>Пол</label>
                        <select name="gender">
                            <option value="">Выберите пол</option>
                            <option value="male">Мужской</option>
                            <option value="female">Женский</option>
                            <option value="other">Другой</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Рост (см)</label>
                        <input type="number" name="height" placeholder="175" min="100" max="250">
                    </div>
                    
                    <div class="form-group">
                        <label>Вес (кг)</label>
                        <input type="number" name="weight" placeholder="70" min="30" max="300">
                    </div>
                    
                    <div class="form-group">
                        <label>Цель тренировок</label>
                        <select name="goal">
                            <option value="">Выберите цель</option>
                            <option value="weight_loss">Похудение</option>
                            <option value="muscle_gain">Набор мышечной массы</option>
                            <option value="strength">Увеличение силы</option>
                            <option value="endurance">Развитие выносливости</option>
                            <option value="health">Общее оздоровление</option>
                            <option value="sport_specific">Спортивная подготовка</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Уровень активности</label>
                        <select name="activityLevel">
                            <option value="">Выберите уровень</option>
                            <option value="sedentary">Малоподвижный</option>
                            <option value="light">Легкая активность</option>
                            <option value="moderate">Умеренная активность</option>
                            <option value="active">Высокая активность</option>
                            <option value="very_active">Очень высокая активность</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Медицинские особенности</label>
                        <textarea name="medicalConditions" placeholder="Противопоказания, травмы, заболевания..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="app.closeModal('add-client-modal')">
                    Отмена
                </button>
                <button type="submit" form="add-client-form" class="btn btn-primary">
                    Добавить клиента
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно добавления тренировки -->
    <div id="add-workout-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Новая тренировка</h3>
                <button class="modal-close" onclick="app.closeModal('add-workout-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-workout-form">
                    <div class="form-group">
                        <label>Клиент*</label>
                        <select name="clientId" required>
                            <option value="">Выберите клиента</option>
                            <option value="1">Анна Иванова</option>
                            <option value="2">Петр Сидоров</option>
                            <option value="3">Мария Петрова</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Дата*</label>
                        <input type="date" name="date" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Время*</label>
                        <input type="time" name="time" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Длительность (минуты)</label>
                        <input type="number" name="duration" value="60" min="15" max="180">
                    </div>
                    
                    <div class="form-group">
                        <label>Тип тренировки</label>
                        <select name="type">
                            <option value="strength">Силовая</option>
                            <option value="cardio">Кардио</option>
                            <option value="functional">Функциональная</option>
                            <option value="stretching">Растяжка</option>
                            <option value="mixed">Смешанная</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Локация</label>
                        <input type="text" name="location" placeholder="Спортзал, дом, улица...">
                    </div>
                    
                    <div class="form-group">
                        <label>Заметки</label>
                        <textarea name="notes" placeholder="Дополнительная информация о тренировке..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="app.closeModal('add-workout-modal')">
                    Отмена
                </button>
                <button type="submit" form="add-workout-form" class="btn btn-primary">
                    Запланировать
                </button>
            </div>
        </div>
    </div>

    <!-- Скрипты -->
    <script src="js/telegram.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/clients.js"></script>
    <script src="js/workouts.js"></script>
    <script src="js/app.js"></script>
</body>
</html>